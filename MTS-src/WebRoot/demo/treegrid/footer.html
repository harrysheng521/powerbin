<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>TreeGrid with Footer - KINGDOM UI Demo</title>
  <link rel="stylesheet" type="text/css" href="../../kui-base/themes/icon.css">
  <script type="text/javascript" src="../../kui-base/js/core/jquery-1.8.3.min.js"></script>
	<script type="text/javascript" src="../../kui-base/js/core/kui.loader.js"></script>
</head>
<body>
	<h2>TreeGrid with Footer</h2>
	<div class="demo-info">
		<div class="demo-tip icon-tip"></div>
		<div>Show summary information on TreeGrid footer.</div>
	</div>
	<div style="margin:10px 0;"></div>
	<table id="tg"></table>
	<script type="text/javascript">
		$(function(){
      using('treegrid',function(){
        $('#tg').treegrid({
          title:'TreeGrid with Footer',
          iconCls:'icon-ok',
          width:700,
          height:450,
          rownumbers: true,
          animate:true,
          collapsible:true,
          fitColumns:true,
          url:'../treegrid/treegrid_data2.json',
          idField:'id',
		  showRowDetail:false,
          treeField:'name',
          showFooter:true,
		  queryCols:[{cols:[{title:'Task Name',field:'name',width:180,type:'input'}]}],
          columns:[[
			{field:'ck',checkbox:true},
            {title:'Task Name',field:'name',width:180},
            {field:'persons',title:'Persons',width:60,align:'right'},
            {field:'begin',title:'Begin Date',width:80},
            {field:'end',title:'End Date',width:80},
            {field:'progress',title:'Progress',width:120,
              formatter:function(value){
                if (value){
                  var s = '<div style="width:100%;border:1px solid #ccc">' +
                          '<div style="width:' + value + '%;background:#cc0000;color:#fff">' + value + '%' + '</div>'
                  '</div>';
                  return s;
                } else {
                  return '';
                }
              }
            }
          ]],
		  singleSelect:false,
				onSelect:function(a,b,c){
						for(var i = 0;a.children&&i<a.children.length;i++){							
							$('#tg').treegrid('select',a.children[i]['id']);
						}
					},
				onUnselect:function(a,b,c){
						for(var i = 0;a.children&&i<a.children.length;i++){							
							$('#tg').treegrid('unselect',a.children[i]['id']);
						}
					}
        });
      });

		})
	</script>
</body>
</html>